{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Admin Referrals Queue: Add status, program, and submission date range filters",
  "requirements": [
    {
      "id": "REQ-34",
      "summary": "Add combinable (AND) filter controls for Status, Program requested, and Submission date range in the Admin Referrals Queue UI with immediate list updates.",
      "acceptanceCriteria": [
        "A user can filter referrals by Status (including an 'All' option).",
        "A user can filter referrals by Program requested (including an 'All programs' option).",
        "A user can filter referrals by a submission date range using start date and end date inputs.",
        "When multiple filters are set, only referrals matching all selected filters are shown.",
        "Changing any filter updates the list without requiring a page refresh."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/ReferralsTab.tsx",
          "operation": "modify",
          "description": "Extend the existing Referrals Queue filtering to apply Status + Program requested + Submission date range with AND logic, updating the visible list immediately on control changes. Keep the current empty-state behavior when the filtered result is empty. Use existing shadcn/ui components (e.g., Select/Tabs and existing form inputs) by composing them; verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-35",
      "summary": "Derive Program requested filter options from the currently loaded referrals list (unique, sorted) with an explicit 'All programs' option.",
      "acceptanceCriteria": [
        "Program filter options reflect the data present in the fetched referrals list.",
        "Selecting a specific program shows only referrals whose programRequested exactly matches the selected option."
      ],
      "file_operations": [
        {
          "path": "frontend/src/utils/referralFilters.ts",
          "operation": "create",
          "description": "Add a small utility to derive a unique, sorted list of programRequested strings from a referrals array, and provide helpers to apply program filtering (exact match) while supporting an explicit 'All programs' state."
        },
        {
          "path": "frontend/src/components/ReferralsTab.tsx",
          "operation": "modify",
          "description": "Use the referralFilters utility to compute program filter options from the currently loaded referrals, render a Program requested filter control including an 'All programs' option, and apply exact-match filtering. Compose existing shadcn/ui components; verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-36",
      "summary": "Implement an inclusive submission date range filter using referral.createdAt as the submission timestamp.",
      "acceptanceCriteria": [
        "If only a start date is set, referrals submitted on/after that date are shown.",
        "If only an end date is set, referrals submitted on/before that date are shown.",
        "If both are set, referrals submitted between them (inclusive) are shown.",
        "If the selected date range excludes all referrals, the UI shows the existing empty-state behavior for the filtered result."
      ],
      "file_operations": [
        {
          "path": "frontend/src/utils/referralFilters.ts",
          "operation": "modify",
          "description": "Add date range filtering helpers that interpret start/end date inputs as inclusive day boundaries and compare them against referral.createdAt (submission timestamp)."
        },
        {
          "path": "frontend/src/components/ReferralsTab.tsx",
          "operation": "modify",
          "description": "Wire start date and end date inputs into the Referrals Queue filters and apply inclusive createdAt-based filtering (start-only, end-only, or both). Compose existing shadcn/ui components for the date inputs; verify the component's usage instructions before implementing."
        }
      ]
    }
  ]
}